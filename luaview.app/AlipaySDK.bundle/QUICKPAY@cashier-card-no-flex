{"time":"0003","tplId":"QUICKPAY@cashier-card-no-flex","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-card-no-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"cashier-card-no-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","children":[{"text":"var getTag=amc.fn.getById;var rpc=amc.rpcData;var scanFlag=false;var cameraImg=amc.path+\"alipay_msp_icon_camera\";function init(){var d=rpc.switchAcc?amc.res.navMore:null;var c=rpc.switchAcc?onChangeAccount:null;var e=amc.fn.navBack(true,\"{{add_card}}\",null,d,onBack,c);getTag(\"body\").insertBefore(e,getTag(\"mainBody\"));if(rpc.newCardTip){getTag(\"newCardTip\").innerText=rpc.newCardTip}else{amc.fn.hide(\"newCardTipBox\")}if(getTag(\"navImgR\")!==undefined){getTag(\"navImgR\").alt=\"{{switch_account}}\"}if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}getTag(\"camera\").src=cameraImg;if(rpc.gonggao){var b=amc.fn.create(\"div\");b.className=\"amc-marquee amc-pd-lr\";var a=amc.fn.create(\"marquee\");a.className=\"amc-marquee\";a.innerText=rpc.gonggao||\"\";b.appendChild(a);a.style.width=window.innerWidth-(amc.isPlus?40:30);getTag(\"body\").insertBefore(b,getTag(\"mainBody\"))}updateState(\"\");getTag(\"cardNo\").focus()}function updateState(c){var a=getTag(\"camera\");var b=getTag(\"submit\");if(c.length){amc.fn.hide(\"cameraBox\");b.disabled=false;getTag(\"btnText\").style.color=\"#fff\"}else{if(!rpc.disable){amc.fn.show(\"cameraBox\")}b.disabled=true;getTag(\"btnText\").style.color=\"#d2d2d2\"}}function formatBankNo(){var a=getTag(\"cardNo\");var b=a.value||\"\";if(b){a.value=(b.replace(/(\\d{4})(?=\\d)/g,\"$1 \")).trim()||\"\"}updateState(b)}function checkInput(){formatBankNo();scanFlag=false}function onBack(){if(rpc.backAct===\"back\"){amc.fn.back()}else{if(rpc.backAct){var a={action:{name:rpc.backAct}};a.param={};a.param[\"first_enter_cashier\"]=false;document.submit(a)}else{amc.fn.exitConfirm()}}}function onKeyDown(){if(event.which==4){onBack()}}function onSubmit(){var a={};a.action={name:\"/card/verifyCardNo\",loadtxt:\"\",host:rpc.pci_url,https:true,enctype:\"application/x-www-form-urlencoded\",request_param:\"requestData\",params:rpc.params};a.param={cardno:getTag(\"cardNo\").value.split(\" \").join(\"\")};if(scanFlag){a.param[\"scanflag\"]=true}document.asyncSubmit(a,function(c){if(c.pageloading===\"1\"){amc.fn.hide(\"btnText\");amc.fn.show(\"loading\")}else{if(c.pageloading===\"0\"){amc.fn.show(\"btnText\");amc.fn.hide(\"loading\")}else{if(c.status){var b=c.status.substr(2,2);if(b===\"02\"){updateState(\"\");getTag(\"cardNo\").value=\"\";getTag(\"cardNo\").focus()}}}}});amc.fn.hide(\"btnText\");amc.fn.show(\"loading\")}function onScanCard(){document.asyncSubmit({action:{name:\"loc:scancard\"}},function(a){if(a.data){getTag(\"cardNo\").value=a.data;formatBankNo();scanFlag=true}})}function onChangeAccount(){if(rpc.switchAcc){var a=new Array();a.push(\"{{switch_account}}\");document.actionSheet({btns:a,cancelBtn:\"{{cancel}}\"},function(b){if(b.index===0){var c={action:{name:\"/cashier/switchAccount\"}};c.param={backAct:\"exit\"};document.submit(c)}})}};","tag":"text"}]},{"tag":"style","children":[{"text":".guide-circle{\n    background-color: #ccc;\n    border-radius: 4px;\n    height: 8px;\n    width: 8px;\n}\n.guide-line2px{\n    background-color: #ccc;\n    height: 2px;\n    flex: 5.0;\n}\n.guide-blank-area{\n    flex: 2.0;\n}\n.guide-upper-box{\n    justify-content: center;\n}\n.guide-lower-box{\n    justify-content: center;\n    align-items: center;\n}\n.loading-color {\n    color: #fff;\n}\n.camera-box {\n    align-items: center;\n    align-self: stretch;\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{},{"id":"mainBody","tag":"div","children":[{},{"id":"newCardTipBox","tag":"div","children":[{"id":"newCardTip","tag":"label","css":"amc-text-light-color amc-font-xs amc-flex-1"}],"css":"amc-align-center amc-pd-lr amc-margin-b-ss"},{},{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"{{card_no}}","tag":"text"}],"css":"amc-cell-l-text"}],"css":"amc-cell-l-box"},{"tag":"div","children":[{"id":"cardNo","autofocus":"true","placeholder":"{{bank_no}}","tag":"input","value":"","type":"number","css":"amc-input","oninput":"checkInput();"}],"css":"amc-cell-m-box"},{"id":"cameraBox","tag":"div","children":[{"id":"camera","tag":"img"}],"onclick":"onScanCard();","css":"camera-box amc-hidden"}],"css":"amc-cell amc-pd-lr"},{"tag":"div","css":"amc-1px-line"},{},{"tag":"div","children":[{"tag":"label","children":[{"text":"{{alipay_sec}}","tag":"text"}],"css":"amc-cell-footer-text amc-flex-1 amc-font-xs"}],"css":"amc-cell-footer-box"},{"tag":"div","children":[{"id":"submit","tag":"div","children":[{"id":"loading","tag":"img","src":"indicatior","css":"amc-loading-img loading-color amc-hidden"},{"id":"btnText","tag":"label","children":[{"text":"{{next}}","tag":"text"}],"css":"amc-btn-disabled-color amc-font-super-l amc-btn-disabled-color"}],"onclick":"onSubmit();","disabled":"true","css":"amc-btn-primary amc-justify-center amc-align-center"}],"css":"amc-pd-lr amc-pd-b"}],"css":"amc-main amc-scroll-android"}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.0.4"}