{"time":"0021","tplId":"QUICKPAY@open-pwd-check-flex","publishVersion":"150924","tag":"QUICKPAY","name":"open-pwd-check-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var rpc=amc.rpcData;var getTag=amc.fn.getById;var hide=amc.fn.hide;var show=amc.fn.show;var loadingBlueGif=amc.path+\"alipay_msp_loading_blue.gif\";var successBlueNorepeatGif=amc.path+\"alipay_msp_success_blue.gif\";var nextAction=rpc.nextAction||\"/pwd/validate\";var thirdPay=rpc.fingerPay||rpc.braceletPay||rpc.wearablePay;var spasswordPay=rpc.spasswordPay;var successTxt=rpc.successText||\"{{pay_ok}}\";var payTxt=rpc.doingText||\"{{paying}}\";var btnText=rpc.btnText||\"{{pay}}\";var showQuickMode=!!(rpc.oneDayOnePwdShow&&rpc.oneDayOnePwdTips);var quickModeTip=rpc.oneDayOnePwdTips;var quickModeChecked=!!rpc.oneDayOnePwdChecked;var gifTag;var backAction=\"\";var braceletPayTip=null;function init(){var b=amc.res.close;if(rpc.backAction){backAction=rpc.backAction}else{if(rpc.bizType===\"deposit\"||rpc.payOrder){backAction=\"loc:back\";b=amc.res.arrowLeft}else{backAction=\"loc:exit\"}}var d=amc.fn.iNav(b,\"{{input_pwd}}\",null,null,onBack,null);getTag(\"body\").insertBefore(d,getTag(\"iLine\"));gifTag=getTag(\"pwdLoadGif\");getTag(\"loadTxt\").innerText=payTxt;getTag(\"payBtn\").innerText=btnText;if(showQuickMode){show(\"quickMode\");hide(\"leftMargin\");getTag(\"quickModeTip\").innerText=quickModeTip;getTag(\"quickModeCheckbox\").checked=quickModeChecked}if(thirdPay){getTag(\"body\").style.opacity=\"0\";var c={action:{name:rpc.authAction}};var a={nativeValidate:true};c.param=a;document.asyncSubmit(c,function(f){var e=f.status&&f.status.substr(-2);if(e===\"04\"||e===\"05\"){braceletPayTip=f.tip;thirdPay=false;getTag(\"body\").style.opacity=\"1\";checkPwd()}else{if(f.status===\"0009\"){amc.fn.exit()}}})}else{checkPwd()}}function checkPwd(){show(\"tips\");if(braceletPayTip){getTag(\"tips\").innerText=braceletPayTip;braceletPayTip=null}else{if(rpc.pwdTip){getTag(\"tips\").innerText=rpc.pwdTip}else{hide(\"tips\")}}getTag(\"iNavTxtM\").innerText=\"{{input_pwd}}\";var b=getTag(\"password\");var a=getTag(\"spassword\");if(spasswordPay){hide(b);show(a);getTag(\"spwd\").focus()}else{hide(a);show(b);getTag(\"pwd\").focus()}}function submitPay(b,a){hide(\"pwdBox\");hide(\"tips\");show(\"pwdLoad\");gifTag.src=loadingBlueGif;b.blur();a.action={};a.action[\"name\"]=nextAction;a.action[\"loadtxt\"]=\"\";a.action[\"neec\"]=\"6004\";if(showQuickMode){if(getTag(\"quickModeCheckbox\").checked){a.param[\"one_day_one_pwd_checked\"]=\"true\"}else{a.param[\"one_day_one_pwd_checked\"]=\"false\"}}a.action[\"params\"]=rpc.params;document.asyncSubmit(a,function(c){if(c.status===\"0001\"){getTag(\"loadTxt\").innerText=c.successText||successTxt;gifTag.src=successBlueNorepeatGif}else{if(c.status===\"0002\"){resetPwd(false)}else{if(c.status===\"0000\"){resetPwd(true)}}}})}function resetPwd(a){gifTag.src=\"\";hide(\"pwdLoad\");show(\"pwdBox\");getTag(\"payBtn\").disabled=true;var b=spasswordPay?getTag(\"spwd\"):getTag(\"pwd\");b.value=\"\";if(!spasswordPay){onPwdInput()}if(a||amc.isAndroid){b.focus()}}function onPwdInput(){var a=getTag(\"pwd\");if(a.value.length>0){getTag(\"payBtn\").disabled=false;getTag(\"payBtn\").style.color=\"#0ae\"}else{getTag(\"payBtn\").disabled=true;getTag(\"payBtn\").style.color=\"#d2d2d2\"}}function onSpwdInput(){var c=getTag(\"spwd\");if(c.value.length>=6){var b=c.encryptValue||c.value||\"\";var a={spwd:b};a.encryptType=\"RSA\";var d={};d.param=a;submitPay(c,d)}}function onPasswordPay(){var c=getTag(\"pwd\");if(c.value.length>0){var a={};a.pwd=c.encryptValue||c.value||\"\";a.encryptType=\"RSA\";var b={};b.param=a;submitPay(c,b)}}function onQuickModeCheck(){getTag(\"quickModeCheckbox\").checked=!getTag(\"quickModeCheckbox\").checked}function onBack(){document.submit({action:{name:backAction}})}function forgetPwd(){var b=\"\";if(rpc.logon_id){b=\"&loginId=\"+rpc.logon_id}var a=\"alipays://platformapi/startApp?appId=20000013&pwdType=phonePassword\"+b;document.submit({action:{name:\"loc:openurl('\"+a+\"','0')\"}})}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".pwd-btn-text {\n    color:#d2d2d2;\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"iLine","tag":"div","css":"amc-1px-title-line"},{"id":"mainBody","tag":"div","children":[{},{"tag":"div","children":[{"id":"tips","tag":"label","css":"amc-flex-1 amc-text-center amc-font-m"}],"css":"amc-flex-center amc-pd-lr amc-pd-t"},{"id":"pwdBox","tag":"div","children":[{},{"id":"password","tag":"div","children":[{"tag":"div","children":[{},{"tag":"div","children":[{"tag":"div","css":"amc-abs-space-h-m"},{"id":"pwd","placeholder":"{{alipaypwd}}","tag":"input","value":"","type":"paypwd","css":"amc-input amc-spwd-height","oninput":"onPwdInput()"}],"css":"amc-cell-m-box"},{"tag":"div","css":"amc-cell-v-line"},{},{"tag":"div","children":[{"id":"payBtn","tag":"label","children":[{"text":"{{pay}}","tag":"text"}],"css":"pwd-btn-text amc-font-xxl","disabled":"disabled"}],"onclick":"onPasswordPay()","css":"amc-flex-center amc-pwd-check-btn-w"}],"css":"amc-spwd-box"}],"css":"amc-pd-t"},{},{"id":"spassword","tag":"div","children":[{"id":"spwd","tag":"input","value":"","type":"payspwd","css":"amc-pwd-input","oninput":"onSpwdInput()"}],"css":"amc-spwd-box amc-margin-t amc-hidden"},{"tag":"div","children":[{},{"id":"quickMode","tag":"div","children":[{"id":"quickModeCheckbox","tag":"input","type":"checkbox","css":"amc-checkbox amc-margin-r-xs"},{"id":"quickModeTip","tag":"label","css":"amc-flex-1 amc-font-m amc-ellipsis"}],"onclick":"onQuickModeCheck()","css":"amc-align-center amc-flex-1 amc-margin-r-xs amc-pd-t-s amc-hidden"},{"id":"leftMargin","tag":"div","css":"amc-flex-1"},{},{"tag":"div","children":[{"tag":"label","children":[{"text":"{{forget_pwd}}","tag":"text"}],"onclick":"forgetPwd()","css":"amc-theme-color amc-font-m"}],"css":"amc-pd-t-s"}]}],"css":"amc-pd-lr amc-v-box"},{},{"id":"pwdLoad","tag":"div","children":[{"tag":"div","css":"amc-flex-space-1"},{"id":"pwdLoadGif","tag":"img","css":"amc-load-img"},{"tag":"div","children":[{"id":"loadTxt","tag":"label","children":[{"text":"{{paying}}","tag":"text"}],"css":"amc-font-l-white"}],"css":"amc-justify-center amc-pd-t-l"},{"tag":"div","css":"amc-flex-space-2"}],"css":"amc-loading-box"}],"css":"amc-v-box amc-flex-1"}],"onkeydown":"onKeyDown()","css":"amc-i-body"}]},"format":"JSON","tplVersion":"5.0.4"}