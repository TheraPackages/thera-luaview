{"time":"0008","tplId":"QUICKPAY@cashier-safeprotect-quiz-flex","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-safeprotect-quiz-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var hide=amc.fn.hide;var show=amc.fn.show;var getTag=amc.fn.getById;var rpc=amc.rpcData;var create=amc.fn.create;var CHECK_NORMAL=amc.path+\"alipay_msp_check\";var CHECK_SELECTED=amc.path+\"alipay_msp_checked\";var CSS_NORMAL=\"item-margin-l item-normal\";var CSS_SELECTED=\"item-margin-l item-checked\";var DISPLAY_TYPE_TEXT=\"TEXT\";var DISPLAY_TYPE_PIC=\"URL\";var DISPLAY_TYPE_PIC_TEXT=\"TEXTURL\";var ITEMS_PER_LINE=3;var SEPARATOR=\"_separator_\";var answers=rpc.answers||[];var currentAnswer={};var questions=rpc.privacy_question;var correctNum=1;var isText=false;var gItems=[];var pageNo=rpc.pageNo||0;var imgSize=83;function init(){var d=amc.fn.getNav(amc.res.navBack,\"{{return}}\",\"{{id_validate}}\",null,null,onBack,null);getTag(\"body\").insertBefore(d,getTag(\"mainBody\"));if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}var a=(window.innerWidth-(amc.isPlus?100:80))/3;if(a>60){imgSize=(a>200?200:a)}var c=questions&&questions[pageNo];if(c){getTag(\"question\").innerText=c.text||\"\";if(c.correctNum){correctNum=c.correctNum}currentAnswer.questionId=c.questionId;currentAnswer.propName=c.propName;var b=optionStructConvert(c.options,c.displayType);createItems(b)}}function optionStructConvert(h,c){if(!h){return}var a=Object.keys(h).sort();var j=[];for(var d=0;d<a.length;d++){var g=a[d];var e={key:g};var f=h[g]||\"\";if(c===DISPLAY_TYPE_TEXT){e.text=f}else{if(c===DISPLAY_TYPE_PIC){e.img=f}else{var b=f.split(SEPARATOR);if(b&&b.length>=2){e.text=b[0];e.img=b[1]}}}j[j.length]=e}return j}function createItems(b){if(!b||!b.length){return}isText=!b[0][\"img\"];if(isText){var g=getTag(\"items\");g.className=\"amc-v-box amc-bg-white amc-margin-t\";create(\"div\",\"amc-1px-line\",g);for(var d=0;d<b.length;d++){var f=createItem(b[d],g,isText);if(f&&d<b.length-1){var a=create(\"div\",\"amc-1px-line amc-margin-l\",g)}}create(\"div\",\"amc-1px-line\",g)}else{var g;for(var d=0;d<b.length;d++){if(d%ITEMS_PER_LINE===0||!g){g=create(\"div\",\"item-margin-t amc-justify-center pd-r\",getTag(\"items\"))}var f=createItem(b[d],g,isText)}var c=(ITEMS_PER_LINE-b.length%ITEMS_PER_LINE)%ITEMS_PER_LINE;for(var d=0;d<c;d++){var e=create(\"div\",\"item-margin-l\",g);setDimension(e,imgSize)}}}function setDimension(b,c){if(!b||!c){return}var a=c+\"px\";b.style.width=a;b.style.height=a;b.style.maxWidth=a;b.style.maxHeight=a}function createItem(a,e,g){if(!a||!e){return}var d=g?createItemText:createItemPic;var c=d(a,e);if(!c){return}var f=c.item;var b=gItems.length;f.onclick=function(){toggle(b)};gItems[gItems.length]=c;return f}function createItemPic(d,j){if(!d.img||!j){return}var l=create(\"div\",\"item-margin-l\",j);setDimension(l,imgSize);var f=create(\"img\",\"amc-bg-white\",l);setDimension(f,imgSize);var m=d.img;var b=\"_100x100.jpg\";if(imgSize>120){b=\"_200x200.jpg\"}else{if(imgSize>90){b=\"_140x140.jpg\"}}if((m.indexOf(\"tfsimg.alipay.com\")!==-1)||(m.indexOf(\"taobaocdn.com\")!==-1)){m+=b}f.src=m;var c=create(\"div\",\"amc-v-box\",l);c.style.marginLeft=-imgSize+\"px\";setDimension(c,imgSize);var e=create(\"div\",\"check-img-box amc-justify-end\",c);var h=create(\"img\",\"check-img amc-hidden\",e);h.src=CHECK_SELECTED;if(d.text){var a=create(\"div\",\"amc-flex-1\",c);var g=create(\"div\",\"text-container amc-justify-center amc-align-center\",c);var k=create(\"div\",\"amc-justify-center amc-align-center label-box\",c);var i=create(\"label\",\"text-on-img amc-text-center amc-ellipsis amc-flex-1\",k);i.innerText=d.text}return{item:l,checkbox:h,checked:false,disabled:false,key:d.key}}function createItemText(a,c){if(!a.text||!c){return}var d=create(\"div\",\"amc-pd amc-align-center\",c);var e=create(\"div\",\"amc-flex-1\",d);var b=create(\"label\",\"amc-text-dark-color amc-flex-1 amc-font-xl\",e);b.innerText=a.text;var f=create(\"img\",\"amc-margin-l check-img\",d);f.src=CHECK_NORMAL;return{item:d,checkbox:f,checked:false,disabled:false,key:a.key}}function onBack(){amc.fn.exitConfirm()}function updateCheckStatePic(b,a){if(!b||!b.item||!b.checkbox){return}if(a){b.item.className=CSS_SELECTED;show(b.checkbox)}else{b.item.className=CSS_NORMAL;hide(b.checkbox)}b.checked=!!a}function updateCheckStateText(b,a){if(!b||!b.item||!b.checkbox){return}b.checkbox.src=a?CHECK_SELECTED:CHECK_NORMAL;b.checked=!!a}function updateDisableState(b,a){if(!b||!b.item||!b.checkbox){return}if(a){b.item.style.opacity=0.2}else{b.item.style.opacity=1}b.disabled=!!a}function toggle(a){if(a!==undefined&&gItems[a]&&!gItems[a][\"disabled\"]){var c=isText?updateCheckStateText:updateCheckStatePic;if(correctNum===1){for(var b=0;b<gItems.length;b++){c(gItems[b],false)}}c(gItems[a],!gItems[a][\"checked\"]);updateSelectionState(gItems[a][\"checked\"])}}function updateSelectionState(){var a=selectedOptions().length;if(a>=correctNum){if(correctNum>1){for(var b=0;b<gItems.length;b++){if(!gItems[b][\"checked\"]){updateDisableState(gItems[b],true)}}}getTag(\"submitBtn\").disabled=false;getTag(\"btnText\").style.color=\"#fff\"}else{for(var b=0;b<gItems.length;b++){updateDisableState(gItems[b],false)}getTag(\"submitBtn\").disabled=true;getTag(\"btnText\").style.color=\"#d2d2d2\"}}function selectedOptions(){var a=[];for(var b=0;b<gItems.length;b++){if(gItems[b][\"checked\"]){a[a.length]=gItems[b][\"key\"]}}return a}function onSubmit(){var b={};b.action={loadtxt:\"\",name:rpc.submit_params&&rpc.submit_params.uri,host:rpc.host,https:true,apiVersion:\"1.0.0\",namespace:\"com.alipay.securitycore\",apiName:\"com.alipay.seccorepay\",params:{}};if(!rpc.host){b.action[\"https\"]=false}if(rpc.submit_params){b.action[\"params\"]=rpc.submit_params}currentAnswer.multipleAnswer=selectedOptions();answers[answers.length]=currentAnswer;if(pageNo>=questions.length-1){b.param={privacy_shield:answers};amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"submitBtn\",\"loadingBtn\");document.asyncSubmit(b,function(c){amc.fn.shouldShowBtnIndicator(c,\"submitBtn\",\"loadingBtn\")})}else{b.action={name:\"loc:bnvb\"};b.param={};var a=rpc;a.answers=answers;a.pageNo=pageNo+1;b.param[\"data\"]=a;b.param[\"tplid\"]=\"QUICKPAY@cashier-safeprotect-quiz-flex\";b.param[\"tpl\"]=rpc.tpl;document.submit(b)}}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".pd-r {\n    padding-right: 12px;\n}\n\n.label-box {\n    height: 20px;\n    max-height: 20px;\n}\n.text-on-img {\n    color: #fff;\n    font-weight: bold;\n}\n\n.img-size {\n    height: 83px;\n    width: 83px;\n}\n\n.item-checked {\n    border: 2px #0ae;\n}\n\n.item-normal {\n    border: 0px;\n}\n\n.check-img-box {\n    padding: 5px;\n}\n.text-container {\n    opacity: 0.5;\n    background-color: #333;\n    height: 20px;\n    margin-bottom: -20px;\n}\n.check-img {\n    height: 17px;\n    width: 17px;\n}\n\n.item-margin-l {\n    margin-left: 12px;\n}\n\n.item-margin-t {\n    margin-top: 12px;\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"mainBody","tag":"div","children":[{},{"id":"tipsBox","tag":"div","children":[{"id":"question","tag":"label","css":"amc-text-dark-color amc-font-m amc-flex-1"}],"css":"amc-pd-lr"},{},{"id":"items","tag":"div","css":"amc-v-box"},{},{"tag":"div","children":[{},{"id":"loadingBtn","tag":"div","children":[{"id":"loading","tag":"img","src":"indicatior","css":"amc-loading-img amc-text-white-clolor"}],"css":"amc-btn-primary amc-justify-center amc-align-center amc-hidden"},{},{"id":"submitBtn","tag":"div","children":[{"id":"btnText","tag":"label","children":[{"text":"{{next}}","tag":"text"}],"css":"amc-btn-disabled-color amc-font-super-l amc-btn-disabled-color"}],"onclick":"onSubmit();","disabled":"true","css":"amc-btn-primary amc-justify-center amc-align-center"}],"css":"amc-pd-lr amc-margin-t"}],"css":"amc-main amc-scroll-android"}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.0.4"}