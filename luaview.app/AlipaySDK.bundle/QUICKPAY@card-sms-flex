{"time":"0009","tplId":"QUICKPAY@card-sms-flex","publishVersion":"150924","tag":"QUICKPAY","name":"card-sms-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"card-sms-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var COUNT_DOWN=60;var countDownNum=COUNT_DOWN;var rpc=amc.rpcData;var getTag=amc.fn.getById;var useOrange=(rpc.color===\"orange\");function init(){var a=amc.fn.getNav(amc.res.navBack,\"返回\",\"短信校验码\",null,null,onBack,null);getTag(\"body\").insertBefore(a,getTag(\"commonFullTitle\"));if(rpc.smstip){getTag(\"mainTitle\").innerText=rpc.smstip}else{if(rpc.mobileMask){getTag(\"mainTitle\").innerText=\"请输入手机号\"+rpc.mobileMask+\"收到的短信校验码\"}}getTag(\"resendBtn\").disabled=true;countDownNum=COUNT_DOWN;countDown();if(amc.isAndroid){if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}readSms()}getTag(\"pwd\").focus();if(useOrange){getTag(\"btnBox\").className=\"amc-margin-lr btn-orange amc-align-center amc-justify-center\";getTag(\"submit\").className=\"btn-orange\";getTag(\"resendBtn\").className=\"resend-btn resend-btn-orange\"}}function onPwdInput(){var a=getTag(\"pwd\");a.style.cssText=\"color:#000\";var b=getTag(\"submit\");b.disabled=!a.value}function readSms(){var b={action:{name:\"loc:readsms\"}};var a={smsread:rpc.smsread};b.action[\"params\"]=a;document.asyncSubmit(b,function(c){if(c.sms){getTag(\"pwd\").value=c.sms;onPwdInput()}})}function countDown(){var a=getTag(\"resendBtn\");if(countDownNum>0){a.innerText=countDownNum+\"秒后重发\";countDownNum-=1;setTimeout(countDown,1000)}else{a.innerText=\"重发验证码\";a.disabled=false}}function submitReSend(){if(countDownNum>0){return}var a={};a.action={};a.action[\"name\"]=\"/sms/resend\";document.asyncSubmit(a,function(b){amc.fn.shouldShowBtnIndicator(b,\"submit\",\"loading\")});getTag(\"resendBtn\").disabled=true;countDownNum=COUNT_DOWN;setTimeout(countDown(),1000);getTag(\"pwd\").value=\"\"}function submitInfo(){var b={};var a={smscode:getTag(\"pwd\").value};if(rpc.smsValidateLoginType){a.smsValidateLoginType=rpc.smsValidateLoginType}b.action={};b.action[\"name\"]=\"/cashier/payment\";b.action[\"loadtxt\"]=\"\";b.action[\"params\"]=rpc.params;if(rpc.nextAction){b.action[\"name\"]=rpc.nextAction}b.param=a;document.asyncSubmit(b,function(c){if(c.pageloading===undefined){getTag(\"pwd\").style.cssText=\"color:#ff0000\"}amc.fn.shouldShowBtnIndicator(c,\"submit\",\"loading\")});getTag(\"pwd\").blur();amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"submit\",\"loading\")}function onBack(){amc.fn.exitConfirm()}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".btn-orange {\n    background-color: #ff5500;\n    color: #fff;\n    height: 43px;\n    border: 0px;\n    font-size: 20px;\n    border-radius: 4px;\n    flex: 1.0\n}\n.btn-orange:active {\n    background-color: #e94900;\n    color: #fff;\n}\n.btn-orange:disabled {\n    background-color: #ff5500;\n    color: #ff9574;\n    flex: 1.0\n}\n\n.resend-btn {\n    flex: 1.0;\n    border: 0;\n    font-size:16px;\n    padding:0px;\n    background-color: #fff;\n}\n.resend-btn-blue {\n    color: #0ae;\n}\n.resend-btn-blue:active {\n    color: #0ae;\n    background-color: #fff;\n}\n.resend-btn-blue:disabled {\n    color: #e6e6e6;\n}\n\n.resend-btn-orange {\n    color: #ff5500;\n}\n.resend-btn-orange:active {\n    color: #ff5500;\n    background-color: #fff;\n}\n.resend-btn-orange:disabled {\n    color: #e6e6e6;\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{},{"id":"commonFullTitle","tag":"div","children":[{"id":"mainTitle","tag":"label","css":"amc-font-m"}],"css":"amc-pd-lr amc-v-box amc-pd-t"},{"id":"mainBody","tag":"div","children":[{"tag":"div","css":"amc-1px-line"},{},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"校验码","tag":"text"}],"css":"amc-cell-l-text"}],"css":"amc-cell-l-box"},{"tag":"div","children":[{"id":"pwd","autofocus":"true","placeholder":"短信校验码","tag":"input","type":"num","css":"amc-input","oninput":"onPwdInput()"}],"css":"amc-cell-m-box"},{"tag":"div","css":"amc-cell-v-line"},{"tag":"div","children":[{"id":"resendBtn","tag":"button","children":[{"text":"重发校验码","tag":"text"}],"onclick":"submitReSend()","css":"resend-btn resend-btn-blue","disabled":"disabled"}],"css":"amc-resend-btn-w"}],"css":"amc-cell amc-pd-l"},{"tag":"div","css":"amc-1px-line"},{"tag":"div","css":"amc-abs-space-v-l"},{},{"id":"btnBox","tag":"div","children":[{"id":"loading","tag":"img","src":"indicatior","css":"amc-loading-img amc-text-white-clolor amc-hidden"},{"id":"submit","tag":"button","children":[{"text":"下一步","tag":"text"}],"onclick":"submitInfo()","css":"amc-btn-primary","disabled":"true"}],"css":"amc-margin-lr amc-btn-primary amc-align-center amc-justify-center"}],"css":"amc-main"}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.0.4"}