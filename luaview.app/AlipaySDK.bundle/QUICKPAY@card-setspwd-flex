{"time":"0009","tplId":"QUICKPAY@card-setspwd-flex","publishVersion":"150924","tag":"QUICKPAY","name":"card-setspwd-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"card-setspwd-flex.js"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var getTag=amc.fn.getById;var hide=amc.fn.hide;var show=amc.fn.show;var tipsSet=\"请设置6位数字支付密码，用于支付宝付款\";var tipsRepeat=\"请再次确认\";var actionSet=\"/setting/setSPwd\";var actionRepeat=\"/setting/saveSPwd\";var useOrange=(amc.rpcData.color==\"orange\");function init(){var a=amc.fn.getNav(amc.res.navBack,\"返回\",\"设置支付密码\",null,null,onBack,null);getTag(\"body\").insertBefore(a,getTag(\"mainBody\"));getTag(\"tips\").innerText=tipsSet;if(useOrange){getTag(\"nextBtn\").className=\"btn-orange\";getTag(\"btnBox\").className=\"amc-align-center amc-justify-center btn-orange\"}if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}getTag(\"body\").style.height=amc.specs.bodyHeight;getTag(\"spwd\").focus()}function onSpwdInput(){resetErrMsg();var a=getTag(\"spwd\");if(a.value.length==6){onFirstInput()}}function onFirstInput(){var c={action:{name:actionSet}};var b=getTag(\"spwd\").encryptValue||getTag(\"spwd\").value;var a={spwd:b};a.encryptType=\"RSA\";c.param=a;document.asyncSubmit(c,function(d){if(d.status===\"0001\"){getTag(\"tips\").innerText=tipsRepeat;getTag(\"spwdRepeat\").value=\"\";hide(\"spwd\");hide(\"firstPage\");show(\"spwdRepeat\");show(\"secondPage\");getTag(\"nextBtn\").disabled=true;getTag(\"spwdRepeat\").focus()}else{if(d.status===\"0000\"){getTag(\"spwd\").disabled=false;getTag(\"spwd\").value=\"\";if(d.errMsg){resetErrMsg(d.errMsg)}getTag(\"spwd\").focus()}}})}function onSpwdRepeatInput(){resetErrMsg();var a=getTag(\"spwdRepeat\");getTag(\"nextBtn\").disabled=!(a.value.length===6)}function onSubmit(){var d={action:{name:actionRepeat}};var c=getTag(\"spwdRepeat\");var b=c.encryptValue||c.value;var a={spwd:b};a.encryptType=\"RSA\";d.param=a;d.action[\"loadtxt\"]=\"\";document.asyncSubmit(d,function(e){if(e.status==\"0000\"){if(e.errMsg){resetErrMsg(e.errMsg)}againOnce()}amc.fn.shouldShowBtnIndicator(e,\"nextBtn\",\"loading\")});amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"nextBtn\",\"loading\")}function againOnce(){getTag(\"spwd\").value=\"\";hide(\"spwdRepeat\");hide(\"secondPage\");show(\"spwd\");show(\"firstPage\");getTag(\"tips\").innerText=tipsSet;getTag(\"spwd\").focus()}function resetErrMsg(a){if(a){getTag(\"errMsg\").innerText=a;show(\"errMsgBox\")}else{getTag(\"errMsg\").innerText=\"\";hide(\"errMsgBox\")}}function onBack(){if(getTag(\"spwd\").style.display===\"none\"){againOnce()}else{amc.fn.exitConfirm()}}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".bg-color-gray {\n    background-color: #eee;\n}\n.err-msg-text {\n    color:#f4333c;\n}\n.btn-orange {\n    background-color: #ff5500;\n    color: #fff;\n    height: 43px;\n    border: 0px;\n    font-size: 20px;\n    border-radius: 4px;\n    flex: 1.0\n}\n.btn-orange:active {\n    background-color: #e94900;\n    color: #fff;\n}\n.btn-orange:disabled {\n    background-color: #ff5500;\n    color: #ff9574;\n    flex: 1.0\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"mainBody","tag":"div","children":[{"id":"tips","tag":"label","css":"amc-font-m amc-text-center"},{"id":"spwdBox","tag":"div","children":[{"id":"spwd","maxlength":"6","tag":"input","type":"payspwd","css":"amc-pwd-input","oninput":"onSpwdInput()"},{"id":"spwdRepeat","maxlength":"6","tag":"input","type":"payspwd","css":"amc-spwd-box amc-hidden","oninput":"onSpwdRepeatInput()"}],"css":"amc-spwd-box amc-margin-t"},{"id":"errMsgBox","tag":"div","children":[{"id":"errMsg","tag":"label","children":[{"text":"两次密码输入不一致，请重新输入","tag":"text"}],"css":"err-msg-text amc-text-center amc-flex-1"}],"css":"amc-justify-center amc-margin-t amc-hidden"},{"id":"firstPage","tag":"label","children":[{"text":"密码不能为连续、重复数字或者你的生日","tag":"text"}],"css":"amc-text-light-color amc-font-m amc-margin-l-xs amc-margin-t"},{"tag":"div","css":"amc-abs-space-v-l"},{"id":"secondPage","tag":"div","children":[{"id":"btnBox","tag":"div","children":[{"id":"loading","tag":"img","src":"indicatior","css":"amc-loading-img amc-text-white-clolor amc-hidden"},{"id":"nextBtn","tag":"button","children":[{"text":"下一步","tag":"text"}],"onclick":"onSubmit()","css":"amc-btn-primary","disabled":"disabled"}],"css":"amc-align-center amc-justify-center amc-btn-primary"}],"css":"amc-margin-t amc-hidden"}],"css":"amc-v-box amc-pd "}],"onkeydown":"onKeyDown();","css":"amc-body bg-color-gray"}]},"format":"JSON","tplVersion":"5.0.4"}