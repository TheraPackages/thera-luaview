{"time":"0006","tplId":"QUICKPAY@cashier-safeprotect-sms","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-safeprotect-sms","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"cashier-safeprotect-sms-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var rpc=amc.rpcData;var show=amc.fn.show;var getTag=amc.fn.getById;var countDownNum=60;var timer;var smsread={template:\"{{code}}(\\\\d{4,6})\",tempGroup:\"1\",rules:[\"95188\",\"106575258188\",\"106980095188\",\"106575170001\",\"106575552766\",\"106575552788\",\"10655057868\",\"10655059666\",\"106590571868\",\"106590202028\",\"106575000086\",\"1069099999\",\"95559\",\"95580\",\"95528\",\"95508\",\"95561\"],readTime:\"180\"};function onPwdInput(){var a=getTag(\"pwd\");a.style.cssText=\"color:#000\";var b=getTag(\"submit\");b.disabled=!(a.value.length>0)}function init(){var a=amc.fn.getNav(amc.res.navBack,\"{{return}}\",\"{{id_validate}}\",null,null,onBack,null);getTag(\"body\").insertBefore(a,getTag(\"titleBox\"));if(rpc.mobileMask){getTag(\"mainTitle\").innerText=\"{{phone_sms_f}}\"+rpc.mobileMask+\"{{phone_sms_b}}\"}else{getTag(\"mainTitle\").innerText=\"{{phone_sms}}\"}if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}getTag(\"resendBtn\").disabled=true;countDownNum=60;timer=setInterval(countDown,1000);countDown();if(amc.isAndroid){readSms()}getTag(\"pwd\").focus()}function readSms(){var b={action:{name:\"loc:readsms\"}};var a={smsread:smsread};b.action[\"params\"]=a;document.asyncSubmit(b,function(c){if(c.sms){getTag(\"pwd\").value=c.sms;onPwdInput()}})}function submitReSend(){if(countDownNum>0){return}var a={};a.action={name:rpc.sendsms_params.uri,host:rpc.host,https:true,namespace:\"com.alipay.securitycore\",apiName:\"com.alipay.seccorepay\",apiVersion:\"1.0.0\",params:{}};if(!rpc.host){a.action[\"https\"]=false}a.param={};a.action[\"params\"]=rpc.sendsms_params;a.action[\"params\"][\"sms_template\"]=rpc.sms_template;a.action[\"params\"][\"local\"]=rpc.local;a.action[\"params\"][\"resend_url\"]=rpc.resend_url;document.asyncSubmit(a,function(b){});getTag(\"resendBtn\").disabled=true;countDownNum=60;if(timer){clearInterval(timer);timer=0}timer=setInterval(countDown,1000);getTag(\"pwd\").value=\"\";getTag(\"submit\").disabled=true}function countDown(){if(countDownNum>0){getTag(\"resendBtn\").innerText=\"{{resend_after_f}}\"+countDownNum+\"{{resend_after_b}}\";countDownNum-=1}else{getTag(\"resendBtn\").innerText=\"{{resend_sms}}\";getTag(\"resendBtn\").disabled=false;if(timer){clearInterval(timer);timer=0}}}function submitInfo(){getTag(\"pwd\").blur();var b={};b.action={name:rpc.submit_params.uri,loadtxt:\"\",host:rpc.host,https:true,namespace:\"com.alipay.securitycore\",apiName:\"com.alipay.seccorepay\",apiVersion:\"1.0.0\"};if(!rpc.host){b.action[\"https\"]=false}b.action[\"params\"]=rpc.submit_params;b.action[\"params\"][\"sms_template\"]=rpc.sms_template;b.action[\"params\"][\"local\"]=rpc.local;b.action[\"params\"][\"resend_url\"]=rpc.resend_url;var a={smsCode:getTag(\"pwd\").value};b.param=a;document.asyncSubmit(b,function(c){if(c.pageloading===undefined){getTag(\"pwd\").style.cssText=\"color:#ff0000;\"}amc.fn.shouldShowBtnIndicator(c,\"submit\",\"loading\")});amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"submit\",\"loading\")}function onBack(){var a={title:\"\",message:\"{{confirm_exit}}\",okButton:\"{{confirm_btn}}\",cancelButton:\"{{cancel}}\"};document.confirm(a,function(b){if(b.ok){document.submit({action:{name:\"loc:exit\"}})}})}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style"}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"titleBox","tag":"div","children":[{"id":"mainTitle","tag":"label","css":"amc-font-m amc-flex-1"}],"css":"amc-pd-lr amc-full-title"},{"tag":"div","children":[{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"{{code}}","tag":"text"}],"css":"amc-cell-l-text"}],"css":"amc-cell-l-box"},{"tag":"div","children":[{"id":"pwd","autofocus":"true","placeholder":"{{sms_code}}","tag":"input","value":"","type":"NumbersAndPunctuation","css":"amc-input","oninput":"onPwdInput()"}],"css":"amc-cell-m-box"},{"tag":"div","css":"amc-cell-v-line"},{"tag":"div","children":[{"id":"resendBtn","tag":"button","children":[{"text":"{{resend_sms}}","tag":"text"}],"onclick":"submitReSend()","css":"amc-input amc-theme-color amc-btn-no-bg","disabled":"disabled"}],"css":"amc-resend-btn-w"}],"css":"amc-cell amc-pd-l"},{"tag":"div","css":"amc-1px-line"},{"tag":"div","css":"amc-abs-space-v-xxl"},{"tag":"div","children":[{"id":"loading","tag":"img","src":"indicatior","css":"amc-loading-img amc-text-white-clolor amc-hidden"},{"id":"submit","tag":"button","children":[{"text":"{{next}}","tag":"text"}],"onclick":"submitInfo()","css":"amc-btn-primary","disabled":"true"}],"css":"amc-margin-lr amc-align-center amc-justify-center amc-btn-primary"}],"css":"amc-main"}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.0.4"}