{"time":"0004","tplId":"QUICKPAY@pwd-validate-flex","publishVersion":"150924","tag":"QUICKPAY","name":"pwd-validate-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"pwd-validate-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","children":[{"text":"var rpc=amc.rpcData;var hide=amc.fn.hide;var show=amc.fn.show;var getTag=amc.fn.getById;var wearablePayTip=null;var pageType=rpc.pwdValidateType||\"openService\";var thirdPay=rpc.fingerPay||rpc.braceletPay||rpc.wearablePay;function init(){var c=\"{{id_validate}}\";if(pageType===\"newCard\"){c=\"{{add_card}}\";getTag(\"tips\").innerText=\"{{pwd_add_card}}\"}else{if(pageType===\"openService\"){getTag(\"tips\").innerText=\"{{pwd_id_validate}}\"}}var b=amc.fn.getNav(amc.res.navBack,\"{{return}}\",c,null,null,onBack,null);getTag(\"body\").insertBefore(b,getTag(\"mainBody\"));if(thirdPay){hide(\"mainBody\");var a={action:{name:amc.rpcData.authAction}};submitObj={nativeValidate:true};a.param=submitObj;document.asyncSubmit(a,function(e){var d=e.status&&e.status.substr(-2);if(d===\"04\"||d===\"05\"){wearablePayTip=e.tip;thirdPay=false;show(\"mainBody\");showPwdBox()}else{if(e.status===\"0009\"){if(rpc.backAct===\"exit\"){amc.fn.exit()}else{if(e.pageloading===undefined){amc.fn.back()}}}}})}else{showPwdBox()}}function showPwdBox(){if(wearablePayTip){getTag(\"tips\").innerText=wearablePayTip;wearablePayTip=null}if(amc.rpcData.spasswordPay){hide(\"password\");hide(\"payBtn\");show(\"spassword\");getTag(\"spwd\").focus()}else{hide(\"spassword\");show(\"password\");getTag(\"pwd\").focus()}}function onSpwdInput(){var c=getTag(\"spwd\");if(c.value.length>=6){var b=c.encryptValue||c.value||\"\";var a={spwd:b};a.encryptType=\"RSA\";var d={};d.param=a;submitPpay(c,d)}}function onPwdInput(){var b=getTag(\"pwd\");var a=b.value;getTag(\"payBtn\").disabled=!(a.length>0)}function onPasswordPay(){var d=getTag(\"pwd\");var a=d.encryptValue||d.value;if(a.length>0){var b={};b.pwd=a;b.encryptType=\"RSA\";var c={};c.param=b;submitPpay(d,c)}}function submitPpay(b,a){a.action={};a.action[\"name\"]=amc.rpcData.nextAction;a.action[\"params\"]=amc.rpcData.params;document.asyncSubmit(a,function(d){var c=d.status;if(c&&c!==\"0001\"){b.value=\"\";b.focus()}});b.blur()}function onBack(){if(rpc.backAct===\"exit\"){amc.fn.exitConfirm();return}else{document.submit({action:{name:\"loc:back\"}})}}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style"}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"mainBody","tag":"div","children":[{"tag":"div","children":[{"id":"tips","tag":"label","children":[{"text":"{{pwd_id_validate}}","tag":"text"}],"css":"amc-font-m amc-flex-1 amc-text-center"}],"css":"amc-align-center"},{"id":"pwdBox","tag":"div","children":[{"id":"password","tag":"div","children":[{"tag":"div","children":[{"tag":"div","css":"amc-abs-space-h-m"},{"id":"pwd","placeholder":"{{alipaypwd}}","tag":"input","value":"","type":"paypwd","css":"amc-input amc-spwd-height","oninput":"onPwdInput()"}],"css":"amc-cell-m-box"}],"css":"amc-spwd-box amc-justify-center"},{"id":"spassword","tag":"div","children":[{"id":"spwd","tag":"input","value":"","type":"payspwd","css":"amc-pwd-input","oninput":"onSpwdInput()"}],"css":"amc-spwd-box"}],"css":"amc-pd-tb amc-v-box"},{"id":"payBtn","tag":"button","children":[{"text":"{{next}}","tag":"text"}],"onclick":"onPasswordPay()","css":"amc-btn-primary","disabled":"disabled"}],"css":"amc-main amc-pd-lr"}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.0.4"}