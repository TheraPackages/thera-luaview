{"time":"0033","tplId":"QUICKPAY@pcreditpay-sign-flex","publishVersion":"150924","tag":"QUICKPAY","name":"pcreditpay-sign-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","children":[{"text":"var rpc=amc.rpcData;var getTag=amc.fn.getById;var hide=amc.fn.hide;var show=amc.fn.show;var androidFingerPng=amc.path+\"alipay_msp_finger\";var pcreditPayPng=amc.path+\"alipay_msp_pcredit\";var protocolURL=\"https://fun.alipay.com/bank/index.htm?page=HBFWXY\";var creditAmount=\"0\";var dueDay=\"\";var fingerPay=rpc.fingerPay;var wearablePay=rpc.wearablePay;var wearablePayText=\"{{auth_bic}}\";var payAction=rpc.payAct;var paySuccess=false;if(fingerPay==undefined){fingerPay=false}if(rpc.creditAmount){creditAmount=rpc.creditAmount}if(rpc.dueDay){dueDay=rpc.dueDay}if(!wearablePay){wearablePay=rpc.braceletPay;wearablePayText=\"{{auth_bracelet}}\"}if(payAction==undefined){payAction=\"/cashier/pay\"}var isAndroidFingerPayHuawei=(amc.isAndroid&&fingerPay&&rpc.fpProtocolType==\"2\");function init(){var a=amc.fn.iNav(amc.res.arrowLeft,\"{{pcredit_pay}}\",null,null,onBack,null);getTag(\"body\").insertBefore(a,getTag(\"titleLine\"));getTag(\"pcreditPayLogo\").src=pcreditPayPng;getTag(\"creditAmount\").innerText='{{credit_quota}}<font size=\"22\">'+creditAmount+\"</font>{{money_unit}}\";getTag(\"dueDay\").innerText=\"{{pcredit_text_f}}\"+dueDay+\"{{pcredit_text_b}}\";if(isAndroidFingerPayHuawei){getTag(\"androidFingerPng\").src=androidFingerPng;hide(\"container\");show(\"androidFinger\");fingerPayHuawei();document.onreload=function(b){fingerPayHuawei()}}}function gotoPwdArea(){var a={};a.action={name:\"loc:bnvb\"};a.param={};var b=rpc.bypass||{};a.param[\"data\"]=isObject(b.pwd)?b.pwd:{};a.param[\"data\"][\"spasswordPay\"]=rpc.spasswordPay;if(isAndroidFingerPayHuawei||wearablePay){}else{a.param[\"data\"][\"payOrder\"]=true}a.param[\"data\"][\"nextAction\"]=payAction;a.param[\"data\"][\"pwdTip\"]=rpc.pwdTip;a.param[\"data\"][\"logon_id\"]=rpc.logon_id;a.param[\"tplid\"]=\"QUICKPAY@open-pwd-check-flex\";a.param[\"tpl\"]=rpc.tpl;document.submit(a)}function onPaySuccess(){paySuccess=true;amc.fn.playGif(getTag(\"gifImg\"),amc.res.success);getTag(\"btnText\").innerText=\"{{pay_ok}}\"}function onPayFailure(){paySuccess=false;amc.fn.playGif(getTag(\"gifImg\"),\"\");getTag(\"btnText\").innerText=\"{{confirm_pay}}\"}function npwdPay(){var a={action:{name:payAction,loadtxt:\"\"}};a.action[\"neec\"]=\"6004\";document.asyncSubmit(a,function(b){if(b.status==\"0001\"){onPaySuccess()}else{if(b.status==\"0000\"){onPayFailure()}else{if(b.status==\"0002\"){onPayFailure()}else{if(b.status==\"0006\"){onPayFailure()}}}}})}function onPay(){if(paySuccess){return}if(rpc.npwdPay){npwdPay();return}if(fingerPay||wearablePay){var a={action:{name:rpc.authAction,loadtxt:\"\"}};if(wearablePay){getTag(\"btnText\").innerText=wearablePayText;amc.fn.playGif(getTag(\"gifImg\"),amc.res.loading)}document.asyncSubmit(a,function(c){var b=c.status&&c.status.substr(-2);if(b==\"01\"){onPaySuccess()}else{if(b==\"03\"){amc.fn.playGif(getTag(\"gifImg\"),amc.res.loading);getTag(\"btnText\").innerText=\"{{paying}}\"}else{if(b==\"09\"){document.submit({action:{name:\"loc:exit\"}})}else{if(b==\"00\"){onPayFailure()}else{if(b==\"04\"||b==\"05\"){onPayFailure();gotoPwdArea()}}}}}});return}gotoPwdArea()}function fingerPayHuawei(){var a={action:{name:rpc.authAction}};document.asyncSubmit(a,function(b){if(b.status==\"0001\"){getTag(\"fingerFextLeft\").innerText=\"{{pay_success}}\";hide(\"fingerTextRight\")}else{if(b.status==\"0002\"){getTag(\"fingerFextLeft\").innerText=\"{{auth_fingering}}\";hide(\"fingerTextRight\")}else{if(b.status==\"0003\"){getTag(\"fingerFextLeft\").innerText=\"{{paying}}\";hide(\"fingerTextRight\")}else{if(b.status==\"0004\"){gotoPwdArea()}else{if(b.status==\"0005\"){getTag(\"fingerFextLeft\").innerText=\"{{retry_finger}}\";hide(\"fingerTextRight\")}}}}}})}function openProtocol(){document.submit({action:{name:\"loc:openweb('\"+protocolURL+\"')\"}})}function onBack(){if(rpc.backAct==\"back\"){document.submit({action:{name:\"loc:back\"}})}else{document.submit({action:{name:\"/cashier/view\"}})}}function isObject(a){return Object.prototype.toString.call(a)===\"[object Object]\"}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".pay-text{color:#fff;}\n.hide-box{display:none;}\n.flex-start {\n    align-items: flex-start;\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"titleLine","tag":"div","css":"amc-1px-title-line"},{"tag":"div","children":[{"tag":"div","children":[{"tag":"div","css":"amc-flex-space-1"},{"tag":"div","children":[{"id":"pcreditPayLogo","tag":"img"}],"css":"amc-pd-t"},{"tag":"div","css":"amc-abs-space-v-l"},{"id":"creditAmount","tag":"label","css":" amc-font-l"},{"id":"dueDay","tag":"label","css":" amc-margin-t-xs amc-font-l amc-text-light-color"},{"tag":"div","css":"amc-flex-space-2"}],"css":"amc-pd-lr amc-v-box amc-align-center amc-flex-1"},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"开通花呗即同意","tag":"text"}],"css":"amc-font-m amc-margin-r-xs"},{"tag":"label","children":[{"text":"《蚂蚁花呗用户服务合同》，《芝麻信用服务协议及授权》","tag":"text"}],"onclick":"openProtocol()","css":"amc-font-m amc-theme-color amc-flex-1"}],"css":"amc-pd-b flex-start"},{"id":"container","tag":"div","children":[{"id":"payBtn","tag":"div","children":[{"id":"gifImg","tag":"img","css":"amc-btn-img amc-hidden"},{"id":"btnText","tag":"label","children":[{"text":"开通花呗并付款","tag":"text"}],"css":"pay-text amc-font-super-l"}],"onclick":"onPay()","css":"amc-btn-primary amc-justify-center amc-align-center"}]},{},{"id":"androidFinger","tag":"div","children":[{"tag":"div","children":[{"id":"androidFingerPng","tag":"img","css":"preditpay-finger-img-android"}],"css":"amc-justify-center amc-margin-b"},{"tag":"div","children":[{"id":"fingerFextLeft","tag":"label","children":[{"text":"{{auth_finger_or}}","tag":"text"}],"css":"amc-font-s amc-text-slight-color amc-margin-r-xs"},{"id":"fingerTextRight","tag":"label","children":[{"text":"{{input_pwd_s}}","tag":"text"}],"onclick":"gotoPwdArea()","css":"amc-font-s amc-theme-color"}],"css":"amc-justify-center"}],"css":"amc-v-box hide-box"}],"css":"amc-pd-lr amc-v-box amc-b-box"}],"css":"amc-v-box amc-flex-1"}],"onkeydown":"onKeyDown()","css":"amc-i-body"}]},"format":"JSON","tplVersion":"5.0.3"}