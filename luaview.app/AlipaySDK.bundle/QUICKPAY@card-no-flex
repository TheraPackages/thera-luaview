{"time":"0010","tplId":"QUICKPAY@card-no-flex","publishVersion":"150924","tag":"QUICKPAY","name":"card-no-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"card-no-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","children":[{"text":"var getTag=amc.fn.getById;var rpc=amc.rpcData;var hide=amc.fn.hide;var show=amc.fn.show;var noSkip=(rpc.noSkip===\"1\");var skipTip=rpc.skipTip;var useOrange=(rpc.color===\"orange\");var notice=rpc.notice;var nextAction=rpc.pci_url;var lastNoValue=\"\";function updateState(b){b=b||\"\";var a=b.replace(/\\s/g,\"\");getTag(\"submit\").disabled=a.length<12}function formatBankNo(){var a=getTag(\"cardNo\");var b=a.value||\"\";if(b){a.value=(b.replace(/(\\d{4})(?=\\d)/g,\"$1 \")).trim()||\"\"}updateState(b)}function checkInput(){var b=getTag(\"cardNo\").value||\"\";var a=b.replace(/\\s/g,\"\");var c=\"^\\\\d{0,19}$\";if(a.match(c)){lastNoValue=b}else{getTag(\"cardNo\").value=lastNoValue;return}formatBankNo()}function onBack(){if(rpc.backAct===\"back\"){amc.fn.back()}else{if(rpc.backAct){var a={action:{name:rpc.backAct}};a.param={};a.param[\"first_enter_cashier\"]=false;document.submit(a)}else{amc.fn.exitConfirm()}}}function onSubmit(){var a={};a.action={name:\"/card/verifyCardNo\",host:nextAction,https:true,enctype:\"application/x-www-form-urlencoded\",request_param:\"requestData\",loadtxt:\"\"};a.param={cardno:getTag(\"cardNo\").value.split(\" \").join(\"\")};document.asyncSubmit(a,function(b){if(b.status&&b.status.substr(2,2)===\"02\"){updateState(\"\");getTag(\"cardNo\").value=\"\";getTag(\"cardNo\").focus()}amc.fn.shouldShowBtnIndicator(b,\"submit\",\"nextLoading\")});getTag(\"cardNo\").blur();amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"submit\",\"nextLoading\")}function pass(){var a={action:{name:\"loc:returnData\"},loadtxt:\"\"};a.action[\"params\"]={resultStatus:\"6003\"};document.asyncSubmit(a,function(b){amc.fn.shouldShowBtnIndicator(b,\"btnPass\",\"passLoading\")});amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"btnPass\",\"passLoading\")}function init(){var c=amc.fn.navBack(true,\"添加银行卡\",null,null,onBack,null);getTag(\"body\").insertBefore(c,getTag(\"mainBody\"));updateState(\"\");if(notice){getTag(\"notice\").innerText=notice;show(\"noticeBox\")}if(rpc.gonggao){var b=amc.fn.create(\"div\");b.className=\"amc-marquee amc-pd-lr\";var a=amc.fn.create(\"marquee\");a.className=\"amc-marquee\";a.innerText=rpc.gonggao||\"\";b.appendChild(a);a.style.width=window.innerWidth-(amc.isPlus?40:30);getTag(\"body\").insertBefore(b,getTag(\"mainBody\"))}if(noSkip){hide(\"passBox\")}if(useOrange){document.body.style.cssText=\"background-color:#eee;\";getTag(\"submit\").className=\"btn-orange\";getTag(\"submitBox\").className=\"btn-orange amc-align-center amc-justify-center margin-lr margin-b\";if(!noSkip){getTag(\"btnPass\").className=\"btn-orange-pass\";getTag(\"passBox\").className=\"btn-orange-pass amc-justify-center amc-align-center amc-margin-lr\"}getTag(\"body\").style.height=amc.specs.bodyHeight}if(amc.isAndroid){getTag(\"nextLoading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}if(skipTip){getTag(\"btnPass\").innerText=skipTip}}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".btn-orange {\n    background-color: #ff5500;\n    color: #fff;\n    height: 43px;\n    border: 0px;\n    font-size: 20px;\n    border-radius: 4px;\n    flex: 1.0\n}\n.btn-orange:active {\n    background-color: #e94900;\n    color: #fff;\n}\n.btn-orange:disabled {\n    background-color: #ff5500;\n    color: #ff9574;\n    flex: 1.0\n}\n.btn-orange-pass {\n    background-color: #eee;\n    color: #ff5500;\n    height: 43px;\n    border: #ff5500 1px solid;\n    font-size: 20 px;\n    border-radius: 4px;\n    flex: 1.0\n}\n.btn-orange-pass:active {\n    background-color: #f3c0a6;\n    color: #ff5500;\n    flex: 1.0\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"mainBody","tag":"div","children":[{"id":"noticeBox","tag":"div","children":[{"id":"notice","tag":"label","css":"amc-flex-1"}],"css":"amc-pd-lr amc-pd-b amc-hidden"},{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"卡号","tag":"text"}],"css":"amc-cell-l-text"}],"css":"amc-cell-l-box"},{"tag":"div","children":[{"id":"cardNo","autofocus":"true","placeholder":"银行卡号","tag":"input","type":"num","css":"amc-input","oninput":"checkInput();"}],"css":"amc-cell-m-box"}],"css":"amc-cell amc-pd-lr"},{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{"tag":"label","children":[{"text":"支付宝智能加密，保障你的用卡安全","tag":"text"}],"css":"amc-cell-footer-text"}],"css":"amc-cell-footer-box"},{"id":"submitBox","tag":"div","children":[{"id":"nextLoading","tag":"img","src":"indicatior","css":"amc-loading-img amc-text-white-clolor amc-hidden"},{"id":"submit","tag":"button","children":[{"text":"下一步","tag":"text"}],"onclick":"onSubmit()","css":"amc-btn-primary"}],"css":"amc-btn-primary amc-align-center amc-justify-center amc-margin-lr amc-margin-b"},{"id":"passBox","tag":"div","children":[{"id":"passLoading","tag":"img","src":"indicatior","css":"amc-loading-img amc-hidden"},{"id":"btnPass","tag":"button","children":[{"text":"跳过","tag":"text"}],"onclick":"pass()","css":"amc-btn-secondary amc-flex-1"}],"css":"amc-btn-secondary amc-justify-center amc-align-center amc-margin-lr"}],"css":"amc-main amc-scroll-android"}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.0.4"}