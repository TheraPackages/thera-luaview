{"time":"0006","tplId":"QUICKPAY@cashier-sms-flex","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-sms-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"cashier-sms-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var rpc=amc.rpcData;var getTag=amc.fn.getById;var timer;var countDownNum=60;function init(){var a=amc.fn.getNav(amc.res.navBack,\"{{return}}\",\"{{sms_code}}\",null,null,onBack,null);getTag(\"body\").insertBefore(a,getTag(\"commonFullTitle\"));if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}if(rpc.mobileMask){getTag(\"mainTitle\").innerText=\"{{phone_sms_f}}\"+rpc.mobileMask+\"{{phone_sms_b}}\"}else{getTag(\"mainTitle\").innerText=\"{{phone_sms}}\"}if(rpc.smstip){getTag(\"mainTitle\").innerText=rpc.smstip}timer=setInterval(countDown,1000);countDown();if(amc.isAndroid){readSms()}getTag(\"pwd\").focus()}function onPwdInput(){var a=getTag(\"pwd\");a.style.cssText=\"color:#000\";var b=getTag(\"submit\");b.disabled=a.value.length>0?false:true}function readSms(){var b={action:{name:\"loc:readsms\"}};var a={smsread:rpc.smsread};b.action[\"params\"]=a;document.asyncSubmit(b,function(c){if(c.sms){getTag(\"pwd\").value=c.sms;onPwdInput()}})}function countDown(){var a=getTag(\"resendBtn\");if(countDownNum>0){a.innerText=\"{{resend_after_f}}\"+countDownNum+\"{{resend_after_b}}\";countDownNum-=1}else{a.innerText=\"{{resend_sms}}\";a.disabled=false;if(timer){clearInterval(timer);timer=0}}}function onResendClick(){if(countDownNum>0){return}var a={};a.action={};a.action[\"name\"]=\"/sms/resend\";document.asyncSubmit(a,function(b){});getTag(\"resendBtn\").disabled=true;getTag(\"pwd\").value=\"\";countDownNum=60;if(timer){clearInterval(timer);timer=0}timer=setInterval(countDown,1000)}function submitInfo(){var b={};var a={smscode:getTag(\"pwd\").value};a.smsValidateLoginType=rpc.smsValidateLoginType;b.action={};b.action[\"name\"]=rpc.nextAction||\"/cashier/payment\";b.action[\"loadtxt\"]=\"\";b.action[\"params\"]=rpc.params;b.param=a;document.asyncSubmit(b,function(c){if(c.pageloading===undefined){getTag(\"pwd\").style.cssText=\"color:#ff0000\"}else{amc.fn.shouldShowBtnIndicator(c,\"submit\",\"loading\")}});getTag(\"pwd\").blur();amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"submit\",\"loading\")}function onBack(){var a={title:\"\",message:\"{{confirm_exit}}\",okButton:\"{{confirm_btn}}\",cancelButton:\"{{cancel}}\"};document.confirm(a,function(b){if(b.ok){getTag(\"pwd\").blur();document.submit({action:{name:\"loc:exit\"}})}})}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style"}]},{"id":"body","onload":"init()","tag":"body","children":[{},{"id":"commonFullTitle","tag":"div","children":[{"tag":"div","css":"amc-abs-space-v-l"},{"id":"mainTitle","tag":"label","css":"amc-font-m"}],"css":"amc-pd-lr amc-v-box"},{"id":"mainBody","tag":"div","children":[{"tag":"div","css":"amc-1px-line"},{},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"{{code}}","tag":"text"}],"css":"amc-cell-l-text"}],"css":"amc-cell-l-box"},{"tag":"div","children":[{"id":"pwd","autofocus":"true","placeholder":"{{sms_code}}","tag":"input","value":"","type":"number","css":"amc-input","oninput":"onPwdInput()"}],"css":"amc-cell-m-box"},{"tag":"div","css":"amc-cell-v-line"},{"tag":"div","children":[{"id":"resendBtn","tag":"button","children":[{"text":"{{resend_sms}}","tag":"text"}],"onclick":"onResendClick()","css":"amc-inline-btn amc-theme-color","disabled":"true"}],"css":"amc-resend-btn-w"}],"css":"amc-cell amc-pd-l"},{"tag":"div","css":"amc-1px-line"},{"tag":"div","css":"amc-abs-space-v-l"},{},{"tag":"div","children":[{"id":"loading","tag":"img","src":"indicatior","css":"amc-loading-img amc-text-white-clolor amc-hidden"},{"id":"submit","tag":"button","children":[{"text":"{{next}}","tag":"text"}],"onclick":"submitInfo()","css":"amc-btn-primary","disabled":"true"}],"css":"amc-margin-lr amc-btn-primary amc-align-center amc-justify-center"}],"css":"amc-main"}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.0.4"}